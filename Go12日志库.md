# 日志库

上节课的内容

![avatar](images\image-20200422135534822.png)



```go
package main

import (
	"fmt"
	"os"
)

func f1() {
	fileObj, err := os.OpenFile("./sb.txt", os.O_RDWR, 0644)
	if err != nil {
		fmt.Printf("open file failed, err: %v ", err)
		return
	}
	defer fileObj.Close()
	fileObj.Seek(1, 0) //光标向后移动一个字节
	var ret [1]byte

	n, err := fileObj.Read(ret[:])
	if err != nil {
		fmt.Printf(err)
		return
	}
	fmt.Println(string(ret[:n]))
}

func main() {
	f1()
}
//这是临时写入
os.Rename("源文件","新文件") //重命名
```

### time包

![avatar](images\image-20200422152752421.png)

time调用

```go
package main

import (
	"fmt"
	"time"
)

func main() {
	now := time.Now()
	fmt.Println(now)
	fmt.Println(now.Year())
	fmt.Println(now.Month())
	fmt.Println(now.Weekday())
	fmt.Println(now.Date())
	fmt.Println(now.Hour())
	fmt.Println(now.Minute())
	fmt.Println(now.Second())
}
----结果:
[Running] go run "e:\AllProject\src\AxiaoA\go_project\func_c\func_14_time\time01\main.go"
2020-04-22 15:31:56.8830533 +0800 CST m=+0.004001101
2020
April
Wednesday
2020 April 22
15
31
56

[Done] exited with code=0 in 2.049 seconds

//打印时间戳
now.Unix()
now.UnixNano()

//增加时间
	fmt.Println(now.Add(24 * time.Hour)) //增加24小时
```

#### sub 求两个时间之间的差值

#### Equal判断两个时间是不是相同

#### Before 代表的时间点在某个时间之前，返回真；否则返回假

#### After在什么时间之后

#### 定时器

```go
	timer := time.Tick(time.Second)
	for t := range timer {
		fmt.Println(t)
	}
```

#### 时间格式化

```go
//go语言中没有Y-M-D-H
//是通过 2006 01 02 03 04 05  分别表示:年,月,日,时,分,秒
func dataTime() {
	nows := time.Now()
	fmt.Println(nows.Format("2006-01-02 PM")) //PM表示下午
}
```

#### 把字符串时间改成时间戳

```go
func timeF2() {
	now := time.Now() //获取本地时间
	fmt.Println(now)
	timeDate, _ := time.Parse("2006-01-02 15:04:05", "2019-08-04 15:20:20")
	fmt.Println(timeDate)
	//根据字符串加载时区
	localtime, _ := time.LoadLocation("Asia/Shanghai")
	fmt.Println(localtime)
	// 按照指定的时区解析时间
	timeObj, err := time.ParseInLocation("2006-01-02 15:04:05", "2019-08-04 15:20:20", localtime)
	if err != nil {
		fmt.Println(err)
	}
	fmt.Println(timeObj)
}
---结果:
[Running] go run "e:\AllProject\src\AxiaoA\go_project\func_c\func_14_time\time01\main.go"
2020-04-22 17:09:11.9216954 +0800 CST m=+0.003015401
2019-08-04 15:20:20 +0000 UTC
Asia/Shanghai
2019-08-04 15:20:20 +0800 CST

[Done] exited with code=0 in 1.455 seconds

```



## 日志库

log日志库的调用

![avatar](images\image-20200422172933750.png)

```go
package main

import (
	"log"
)

func logsOutput() {
	for i := 0; i < 10; i++ {
		log.Println("this is logs")
	}

}

func main() {
	logsOutput()
}
---
//调用日志的话直接使用log方法.

```

**日志输出到文件中**

```go
func outputFile() {
	logFile, err := os.OpenFile("./access.log", os.O_CREATE|os.O_WRONLY|os.O_APPEND, 0644)
	if err != nil {
		fmt.Println(err)
		return
	}
	log.SetOutput(logFile)

}
```

![avatar](images\image-20200422174521498.png)






























































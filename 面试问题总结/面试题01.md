# 面试题

1. mysql的复制以及binglog记录格式

   [mysql复制原理](<https://zhuanlan.zhihu.com/p/50597960>)

   

2.  mysql备份

   * 方案一:  mysqldump + binlog 
     * 完全备份,通过备份二进制的日志实现增量备份

* 方案二: xtrabackup:

  * 对innoDB:热备,支持完全备份和增量备份
  * 对于MyISAML温备,只支持完全备份

* 方案三: lvm2 快照+binglog

  * 物理备份



3.  mysql中间件

   1. mycat
   2. proxysql

4. 虚拟化技术

   1. kvm
   2. docker
   3. openstack
   4. exsi

5. docker

6. nginx一般用途

   1. 反向代理
   2. 伪静态

7. k8s的资源控制

   ```yaml
   # 资源控制就是讲求pod对物理空间使用的控制
   
   ```

   ```shell
   docker run -it --rm --cpu-period=100000 --cpu-quota=200000 ubuntu-stress:latest /bin/bash
   ```

   8. 写一串Prometheus公式

      1. 建议找个视频学学,太多了.

   9. flannel工作模式

      1. UDP工作模式(性能最差也最常见)

      2. vxlan(性能较好)

      3. host-gw模式(性能最好)

      4. [讲解地址,看了好几篇,涉及到这方面的其实我发现只要是汉字写的都一样的](<https://www.cnblogs.com/chenqionghe/p/11718365.html>)

         

   10. etcd数据一致性

       1. etcd采用的是Raft算法,保证数据的一致性
       2. [详细讲解](<https://www.jianshu.com/p/5aed73b288f7>)

   11. pod对外提供服务的集中方式

       1. hostNetwork : 

       2. hostPort: 将主机的网络映射给pod,这样就可以通过主机的ip+端口进行访问

       3. NodePort: 讲主机的端口映射给pod,这样可以通过主机ip+映射端口进行访问,也是定义在service上

          1.  ```yaml
             kind: Service
             apiversion: v1
             metadata:
               name: serviceName
             spec:
               type: NodePort
               ports:
                 - port: 8086
                   nodePort: 31350
                selector:
                  name: podname   
              ```

       4. LoadBalancer: 只在server上定义,给公有云使用

          1.    ```yanl 
             apiVersion: v1
             kind: Service
             metadata:
               name: influxdb
             spec:
               type: LoadBalancer
               ports:
                 - port: 8083
               selector:
                 name: influxdb
                ```

       5. ingress  : ingress controller 是由k8s管理的负载均衡器,他的镜像包含一个nginx或者HAProxy负载均衡器和一个控制器守护进程

          1. ````yaml
             apiVersion: extensions/v1beta1
             kind: Ingress
             metadata:
               name: IngressName
             spec:
               rules:
                 - host: influxdb.kube.example.com
                   http:
                     paths:
                       - backend:
                         serviceName: influxdb
                         servicePort: 8083
             ````

   12. kube-proxy工作原理

          kube-proxy 监听 API server 中 service 和 endpoint 的变化情况，并通过 userspace、iptables、ipvs 或 winuserspace 等 proxier 来为服务配置负载均衡（仅支持 TCP 和 UDP）。





















